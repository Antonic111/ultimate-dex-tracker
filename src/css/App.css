/* Essential styles for Ultimate Dex Tracker */

/* Prevent white flash on fast scroll (mobile & desktop) */
html, body {
  background-color: var(--main-bg);
  overscroll-behavior: none; /* stop edge glow/flash on desktop */
  min-height: 100%;
  /* Prevent horizontal overflow */
  overflow-x: hidden;
  width: 100%;
  max-width: 100vw;
}

/* Allow pull-to-refresh on mobile */
@media (max-width: 768px) {
  html, body {
    overscroll-behavior: auto;
  }
}

/* Universal modal close button positioning fix */
.modal-header .close-btn,
.pokemon-modal-header .close-btn,
.favorite-modal-header .close-btn,
.hunt-modal-header .close-btn {
  position: relative !important;
  top: -0.5rem !important;
  right: -0.5rem !important;
  margin: 0 !important;
  padding: 0.5rem !important;
  flex-shrink: 0 !important;
}

/* Ensure modal headers use proper flexbox layout */
.modal-header,
.pokemon-modal-header,
.favorite-modal-header,
.hunt-modal-header {
  display: flex !important;
  justify-content: space-between !important;
  align-items: center !important;
  position: relative !important;
  padding: 1rem 1.5rem !important;
}

/* Mobile Header Styles */
@media (max-width: 768px) {
  /* Increase header height and padding on mobile */
  header {
    height: 80px !important;
    max-height: 80px !important;
    padding-bottom: 42px !important;
  }
  
  /* Make header container more flexible */
  header > div {
    height: 80px !important;
    max-height: 80px !important;
    padding-left: 0.5rem !important;
    padding-right: 0.5rem !important;
  }
  
  /* Scale up logo on mobile */
  header img {
    height: 65px !important;
    max-width: 200px !important;
  }
  
  /* Make navigation more compact but readable */
  header nav {
    gap: 0.375rem !important;
    margin-left: 0.75rem !important;
    margin-right: 0.75rem !important;
  }
  
  /* Scale down navigation buttons but keep them readable */
  header nav a {
    padding: 0.25rem 0.5rem !important;
    font-size: 0.7rem !important;
  }
  
  /* Scale down navigation icons */
  header nav svg {
    width: 8px !important;
    height: 8px !important;
  }
  
  /* Override global SVG rules for dropdown icons */
  .admin-icon,
  .logout-icon {
    width: 16px !important;
    height: 16px !important;
    transform: none !important;
    transition: none !important;
    animation: none !important;
  }
  
  /* Prevent any global animations from affecting dropdown icons */
  .admin-icon *,
  .logout-icon * {
    transform: none !important;
    transition: none !important;
    animation: none !important;
  }
  
  /* Aggressive override for any hover states */
  .admin-icon:hover,
  .logout-icon:hover,
  .admin-icon:active,
  .logout-icon:active,
  .admin-icon:focus,
  .logout-icon:focus {
    transform: none !important;
    transition: none !important;
    animation: none !important;
  }
  
  /* Make user section more compact */
  header .ml-auto {
    margin-left: 0 !important;
  }
  
  /* Scale down user text but keep readable */
  header .text-\[7px\] {
    font-size: 0.6rem !important;
  }
  
  header .text-\[10px\] {
    font-size: 0.7rem !important;
  }
  
  /* Scale up profile image */
  header img[alt="Profile"] {
    width: 60px !important;
    height: 60px !important;
    transform: translateY(0px) !important;
  }
  
  /* Adjust dropdown positioning */
  header .absolute {
    top: calc(100% + 10px) !important;
    right: 0 !important;
    min-width: 160px !important;
  }
  
  /* Better mobile dropdown styling */
  header .absolute a,
  header .absolute button {
    padding: 0.75rem 1rem !important;
    font-size: 0.9rem !important;
    gap: 0.75rem !important;
  }
  
  /* Better icon spacing in dropdown */
  header .absolute svg {
    width: 18px !important;
    height: 18px !important;
    flex-shrink: 0 !important;
  }
}

/* Extra small mobile styles */
@media (max-width: 480px) {
  /* More compact header but still readable */
  header {
    height: 70px !important;
    max-height: 70px !important;
    padding-bottom: 42px !important;
  }
  
  header > div {
    height: 70px !important;
    max-height: 70px !important;
    padding-left: 0.375rem !important;
    padding-right: 0.375rem !important;
  }
  
  /* Smaller logo */
  header img {
    height: 55px !important;
    max-width: 180px !important;
  }
  
  /* Tighter navigation but still usable */
  header nav {
    gap: 0.25rem !important;
    margin-left: 0.5rem !important;
    margin-right: 0.5rem !important;
  }
  
  /* Smaller navigation buttons but readable */
  header nav a {
    padding: 0.125rem 0.375rem !important;
    font-size: 0.65rem !important;
    transform: translateY(-3px) !important;
  }
  
  /* Smaller navigation icons */
  header nav svg {
    width: 6px !important;
    height: 6px !important;
  }
  
  /* Smaller user text but readable */
  header .text-\[7px\] {
    font-size: 0.55rem !important;
  }
  
  header .text-\[10px\] {
    font-size: 0.65rem !important;
  }
  
  /* Larger profile image */
  header img[alt="Profile"] {
    width: 55px !important;
    height: 55px !important;
    transform: translateY(0px) !important;
  }
  
  /* Adjust user section spacing */
  header .flex.items-center.gap-3 {
    gap: 0.5rem !important;
  }
  
  /* Smaller dropdown but usable */
  header .absolute {
    min-width: 150px !important;
    font-size: 0.85rem !important;
  }
  
  header .absolute a,
  header .absolute button {
    padding: 0.625rem 0.875rem !important;
    font-size: 0.85rem !important;
    gap: 0.625rem !important;
  }
  
  /* Better icon spacing in small mobile dropdown */
  header .absolute svg {
    width: 16px !important;
    height: 16px !important;
    flex-shrink: 0 !important;
  }
}

/* Page Animation Classes */
.page-animate-1 {
  opacity: 0;
  animation: componentFadeInUp 0.8s ease-out forwards;
}

.page-animate-2 {
  opacity: 0;
  animation: componentFadeInUp 0.8s ease-out forwards;
}

.page-animate-3 {
  opacity: 0;
  animation: componentFadeInUp 0.8s ease-out forwards;
}

@keyframes componentFadeInUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Animation Performance Optimizations */
.page-animate-1,
.page-animate-2,
.page-animate-3 {
  will-change: opacity, transform;
  backface-visibility: hidden;
}

/* Category Collapse Animation */
.category-content {
  transition: max-height 0.3s ease-in-out, opacity 0.3s ease-in-out;
  overflow: hidden;
}

.category-content.collapsed {
  max-height: 0;
  opacity: 0;
}

.category-content.expanded {
  max-height: none;
  opacity: 1;
}

/* Main background container with responsive spacing */
.main-bg {
  max-width: 1300px;
  margin: 0 auto;
  padding: 0;
}

/* Mobile-specific spacing for main container */
@media (max-width: 768px) {
  .main-bg {
    max-width: calc(100% - 32px);
    margin: 0 auto;
  }
}

@media (max-width: 480px) {
  .main-bg {
    max-width: calc(100% - 24px);
    margin: 0 auto;
  }
}

/* Dex section spacing - remove extra margins/padding on mobile */
@media (max-width: 768px) {
  .dex-section {
    margin: 0;
    padding: 0;
  }
  
  .box {
    margin: 0;
    padding: 0;
  }
  
  .boxes-row {
    margin: 0;
    padding: 0;
  }
}

/* Progress manager and search bar containers with uniform gaps */
.progress-manager-container {
  max-width: 1300px;
  width: 100%;
  margin: 0 auto;
}

@media (max-width: 768px) {
  .progress-manager-container {
    max-width: calc(100% - 32px);
    margin: 0 auto;
  }
}

@media (max-width: 480px) {
  .progress-manager-container {
    max-width: calc(100% - 24px);
    margin: 0 auto;
  }
}

.search-bar-container {
  max-width: 1300px;
  width: 100%;
  margin: 0 auto;
}

@media (max-width: 768px) {
  .search-bar-container {
    max-width: calc(100% - 32px);
    margin: 0 auto;
  }
}

@media (max-width: 480px) {
  .search-bar-container {
    max-width: calc(100% - 24px);
    margin: 0 auto;
  }
}


/* Mobile Keyboard Handling */
@media (max-width: 768px) {
  body {
    transition: padding-bottom 0.3s ease-out;
  }
  
  /* Ensure inputs are easily tappable on mobile */
  input, textarea, select {
    font-size: 16px; /* Prevents iOS zoom on focus */
    -webkit-appearance: none;
    border-radius: 0;
  }
  
  /* Improve touch targets */
  button, [role="button"] {
    min-height: 44px;
    min-width: 44px;
  }
  
  /* Prevent scrolling when sidebar is open on mobile */
  body.sidebar-open {
    /* Only prevent scrolling of the main page, not the sidebar */
    overflow: hidden !important;
    /* Don't use touch-action: none as it's too aggressive */
  }
  
  /* Smooth scrolling for keyboard adjustments */
  html {
    scroll-behavior: smooth;
  }
}

/* Custom scrollbar system for desktop only */
@media (min-width: 769px) {
  /* Hide default scrollbars on desktop */
  html {
    scrollbar-width: none; /* Firefox */
    -ms-overflow-style: none; /* IE and Edge */
  }
  
  html::-webkit-scrollbar {
    display: none; /* Chrome, Safari, Opera */
  }
  
  body {
    scrollbar-width: none; /* Firefox */
    -ms-overflow-style: none; /* IE and Edge */
  }
  
  body::-webkit-scrollbar {
    display: none; /* Chrome, Safari, Opera */
  }
  
  /* Custom scrollbar track (theme-aware) */
  body::after {
    content: '';
    position: fixed;
    top: 8px;
    right: 6px;
    width: 8px;
    height: calc(100vh - 16px);
    background: var(--scrollbar-track, rgba(255, 255, 255, 0.1));
    z-index: 9999;
    pointer-events: none;
    border-radius: 4px;
    transition: opacity 0.15s ease, visibility 0.15s ease;
  }

  /* Hide scrollbar track when not needed */
  body.no-scrollbar::after {
    opacity: 0;
    visibility: hidden;
  }

  /* Hide scrollbar track during loading */
  body.scrollbar-loading::after {
    opacity: 0;
    visibility: hidden;
  }
  
  /* Scrollbar background - always visible (theme-aware) */
  body::before {
    content: '';
    position: fixed;
    top: 0;
    right: 0;
    width: 20px;
    height: 100vh;
    background: var(--scrollbar-bg, #333333);
    z-index: 9998;
    pointer-events: none;
    transition: opacity 0.15s ease, visibility 0.15s ease;
  }

  /* Hide scrollbar background when not needed */
  body.no-scrollbar::before {
    opacity: 0;
    visibility: hidden;
  }

  /* Hide scrollbar elements during loading */
  body.scrollbar-loading::before {
    opacity: 0;
    visibility: hidden;
  }
  
  /* Custom scrollbar thumb - will be positioned by JavaScript (theme-aware) */
  .custom-scrollbar-thumb {
    position: fixed;
    top: 8px;
    right: 6px;
    width: 8px;
    height: 60px;
    background: var(--scrollbar-thumb, var(--accent));
    z-index: 10000;
    pointer-events: auto;
    border-radius: 4px;
    opacity: 0.8;
    transition: opacity 0.15s ease, transform 0.1s ease, visibility 0.15s ease;
    user-select: none;
  }
  
  /* Show scrollbar thumb on hover */
  body:hover .custom-scrollbar-thumb {
    opacity: 1;
  }
  
  /* Hover effect on thumb */
  .custom-scrollbar-thumb:hover {
    opacity: 1;
    transform: scaleX(1.2);
  }
  
  /* Active/dragging state */
  .custom-scrollbar-thumb:active {
    opacity: 1;
    transform: scaleX(1.3);
  }
}


/* Pokémon Slot Hover Scaling Fix */
.pokemon-slot-hover {
  transform-origin: center center;
  will-change: transform;
  backface-visibility: hidden;
}

.pokemon-slot-hover:hover {
  transform: scale(1.05);
  z-index: 50;
}

