/* Essential styles for Ultimate Dex Tracker */

/* Prevent white flash on fast scroll (mobile & desktop) */
html, body {
  background-color: var(--main-bg);
  overscroll-behavior: none; /* stop edge glow/flash on desktop */
  min-height: 100%;
}

/* Allow pull-to-refresh on mobile */
@media (max-width: 768px) {
  html, body {
    overscroll-behavior: auto;
  }
}

/* Page Animation Classes */
.page-animate-1 {
  opacity: 0;
  animation: componentFadeInUp 0.8s ease-out forwards;
}

.page-animate-2 {
  opacity: 0;
  animation: componentFadeInUp 0.8s ease-out forwards;
}

.page-animate-3 {
  opacity: 0;
  animation: componentFadeInUp 0.8s ease-out forwards;
}

@keyframes componentFadeInUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Animation Performance Optimizations */
.page-animate-1,
.page-animate-2,
.page-animate-3 {
  will-change: opacity, transform;
  backface-visibility: hidden;
}

/* Category Collapse Animation */
.category-content {
  transition: max-height 0.3s ease-in-out, opacity 0.3s ease-in-out;
  overflow: hidden;
}

.category-content.collapsed {
  max-height: 0;
  opacity: 0;
}

.category-content.expanded {
  max-height: none;
  opacity: 1;
}

/* Main background container with responsive spacing */
.main-bg {
  max-width: 1300px;
  margin: 0 auto;
  padding: 0;
}

/* Mobile-specific spacing for main container */
@media (max-width: 768px) {
  .main-bg {
    max-width: calc(100% - 32px);
    margin: 0 auto;
  }
}

@media (max-width: 480px) {
  .main-bg {
    max-width: calc(100% - 24px);
    margin: 0 auto;
  }
}

/* Dex section spacing - remove extra margins/padding on mobile */
@media (max-width: 768px) {
  .dex-section {
    margin: 0;
    padding: 0;
  }
  
  .box {
    margin: 0;
    padding: 0;
  }
  
  .boxes-row {
    margin: 0;
    padding: 0;
  }
}

/* Progress manager and search bar containers with uniform gaps */
.progress-manager-container {
  max-width: 1300px;
  width: 100%;
  margin: 0 auto;
}

@media (max-width: 768px) {
  .progress-manager-container {
    max-width: calc(100% - 32px);
    margin: 0 auto;
  }
}

@media (max-width: 480px) {
  .progress-manager-container {
    max-width: calc(100% - 24px);
    margin: 0 auto;
  }
}

.search-bar-container {
  max-width: 1300px;
  width: 100%;
  margin: 0 auto;
}

@media (max-width: 768px) {
  .search-bar-container {
    max-width: calc(100% - 32px);
    margin: 0 auto;
  }
}

@media (max-width: 480px) {
  .search-bar-container {
    max-width: calc(100% - 24px);
    margin: 0 auto;
  }
}

/* Mobile Keyboard Handling */
@media (max-width: 768px) {
  body {
    transition: padding-bottom 0.3s ease-out;
  }
  
  /* Ensure inputs are easily tappable on mobile */
  input, textarea, select {
    font-size: 16px; /* Prevents iOS zoom on focus */
    -webkit-appearance: none;
    border-radius: 0;
  }
  
  /* Improve touch targets */
  button, [role="button"] {
    min-height: 44px;
    min-width: 44px;
  }
  
  /* Prevent scrolling when sidebar is open on mobile */
  body.sidebar-open {
    /* Only prevent scrolling of the main page, not the sidebar */
    overflow: hidden !important;
    /* Don't use touch-action: none as it's too aggressive */
  }
  
  /* Smooth scrolling for keyboard adjustments */
  html {
    scroll-behavior: smooth;
  }
}

/* Custom scrollbar system for desktop only */
@media (min-width: 769px) {
  /* Hide default scrollbars on desktop */
  html {
    scrollbar-width: none; /* Firefox */
    -ms-overflow-style: none; /* IE and Edge */
  }
  
  html::-webkit-scrollbar {
    display: none; /* Chrome, Safari, Opera */
  }
  
  body {
    scrollbar-width: none; /* Firefox */
    -ms-overflow-style: none; /* IE and Edge */
  }
  
  body::-webkit-scrollbar {
    display: none; /* Chrome, Safari, Opera */
  }
  
  /* Custom scrollbar track (theme-aware) */
  body::after {
    content: '';
    position: fixed;
    top: 8px;
    right: 6px;
    width: 8px;
    height: calc(100vh - 16px);
    background: var(--scrollbar-track, rgba(255, 255, 255, 0.1));
    z-index: 9999;
    pointer-events: none;
    border-radius: 4px;
  }
  
  /* Scrollbar background - always visible (theme-aware) */
  body::before {
    content: '';
    position: fixed;
    top: 0;
    right: 0;
    width: 20px;
    height: 100vh;
    background: var(--scrollbar-bg, #333333);
    z-index: 9998;
    pointer-events: none;
  }
  
  /* Custom scrollbar thumb - will be positioned by JavaScript (theme-aware) */
  .custom-scrollbar-thumb {
    position: fixed;
    top: 8px;
    right: 6px;
    width: 8px;
    height: 60px;
    background: var(--scrollbar-thumb, var(--accent));
    z-index: 10000;
    pointer-events: auto;
    border-radius: 4px;
    opacity: 0.8;
    transition: opacity 0.3s ease, transform 0.2s ease;
    user-select: none;
  }
  
  /* Show scrollbar thumb on hover */
  body:hover .custom-scrollbar-thumb {
    opacity: 1;
  }
  
  /* Hover effect on thumb */
  .custom-scrollbar-thumb:hover {
    opacity: 1;
    transform: scaleX(1.2);
  }
  
  /* Active/dragging state */
  .custom-scrollbar-thumb:active {
    opacity: 1;
    transform: scaleX(1.3);
  }
}

/* Light theme scrollbar variables */
[data-theme="light"] {
  --scrollbar-bg: #e5e7eb; /* neutral-200 */
  --scrollbar-track: rgba(0,0,0,0.06);
  --scrollbar-thumb: var(--accent);
}

/* Pok√©mon Slot Hover Scaling Fix */
.pokemon-slot-hover {
  transform-origin: center center;
  will-change: transform;
  backface-visibility: hidden;
}

.pokemon-slot-hover:hover {
  transform: scale(1.05);
  z-index: 50;
}
